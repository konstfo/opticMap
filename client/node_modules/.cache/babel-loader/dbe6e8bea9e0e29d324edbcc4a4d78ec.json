{"ast":null,"code":"var React = global.React || require('react');\n\nvar action = require('./action.js');\n\nvar EventEmitter = require('eventemitter2').EventEmitter2 || require('eventemitter2');\n\nvar safeDeepClone = require('./safeDeepClone.js');\n\nvar RenderMixin = require('./RenderMixin.js');\n\nvar flux = {};\n\nfunction mergeStore(mixins, source) {\n  source.actions = source.actions || [];\n  source.exports = source.exports || {};\n\n  if (mixins && Array.isArray(mixins)) {\n    // Merge mixins and state\n    mixins.forEach(function (mixin) {\n      Object.keys(mixin).forEach(function (key) {\n        switch (key) {\n          case 'mixins':\n            return mergeStore(mixin.mixins, mixin);\n\n          case 'actions':\n            source.actions = source.actions.concat(mixin.actions);\n            break;\n\n          case 'exports':\n            Object.keys(mixin.exports).forEach(function (key) {\n              source.exports[key] = mixin.exports[key];\n            });\n            break;\n\n          default:\n            if (source[key]) {\n              throw new Error('The property: ' + key + ', already exists. Can not merge mixin with keys: ' + Object.keys(mixin).join(', '));\n            }\n\n            source[key] = mixin[key];\n        }\n      });\n    });\n  }\n\n  var exports = new EventEmitter({\n    wildcard: true\n  });\n\n  source.emitChange = function () {\n    setTimeout(function () {\n      // Async to avoid running within render of component\n      exports.emit('change');\n    }, 0);\n  };\n\n  source.emit = function () {\n    var args = arguments;\n    setTimeout(function () {\n      // Async to avoid running within render of component\n      exports.emit.apply(exports, args);\n    }, 0);\n  };\n\n  exports.addChangeListener = function (callback) {\n    exports.on('change', callback);\n  };\n\n  exports.removeChangeListener = function (callback) {\n    exports.removeListener('change', callback);\n  }; // Register actions\n\n\n  source.actions.forEach(function (action) {\n    if (!action || !action.handlerName) {\n      throw new Error('This is not an action ' + action);\n    }\n\n    if (!source[action.handlerName]) {\n      throw new Error('There is no handler for action: ' + action);\n    }\n\n    action.on('trigger', source[action.handlerName].bind(source));\n  }); // Register exports\n\n  Object.keys(source.exports).forEach(function (key) {\n    exports[key] = function () {\n      return safeDeepClone('[Circular]', [], source.exports[key].apply(source, arguments));\n    };\n  });\n  return exports;\n}\n\n;\n\nflux.debug = function () {\n  global.React = React;\n};\n\nflux.createActions = function () {\n  return action.apply(null, arguments);\n};\n\nflux.createStore = function (definition) {\n  return mergeStore(definition.mixins, definition);\n};\n\nflux.RenderMixin = RenderMixin; // If running in global mode, expose $$\n\nif (!global.exports && !global.module && (!global.define || !global.define.amd)) {\n  global.flux = flux;\n}\n\nmodule.exports = flux;","map":{"version":3,"sources":["C:/Users/asus/Documents/javascript_studying/opticMap/optic-map/node_modules/flux-react/src/main.js"],"names":["React","global","require","action","EventEmitter","EventEmitter2","safeDeepClone","RenderMixin","flux","mergeStore","mixins","source","actions","exports","Array","isArray","forEach","mixin","Object","keys","key","concat","Error","join","wildcard","emitChange","setTimeout","emit","args","arguments","apply","addChangeListener","callback","on","removeChangeListener","removeListener","handlerName","bind","debug","createActions","createStore","definition","module","define","amd"],"mappings":"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","sourcesContent":["var React = global.React || require('react');\nvar action = require('./action.js');\nvar EventEmitter = require('eventemitter2').EventEmitter2 || require('eventemitter2');\nvar safeDeepClone = require('./safeDeepClone.js');\nvar RenderMixin = require('./RenderMixin.js');\n\nvar flux = {};\n\nfunction mergeStore (mixins, source) {\n\n  source.actions = source.actions || [];\n  source.exports = source.exports || {};\n\n  if (mixins && Array.isArray(mixins)) {\n\n    // Merge mixins and state\n    mixins.forEach(function (mixin) {\n      Object.keys(mixin).forEach(function (key) {\n\n        switch(key) {\n          case 'mixins':\n            return mergeStore(mixin.mixins, mixin);\n          case 'actions':\n            source.actions = source.actions.concat(mixin.actions);\n            break;\n          case 'exports':\n            Object.keys(mixin.exports).forEach(function (key) {\n              source.exports[key] = mixin.exports[key];\n            });\n            break;\n          default:\n            if (source[key]) {\n              throw new Error('The property: ' + key + ', already exists. Can not merge mixin with keys: ' + Object.keys(mixin).join(', '));\n            }\n            source[key] = mixin[key];\n        }\n\n      });\n    });\n\n  }\n\n  var exports = new EventEmitter({\n    wildcard: true\n  });\n\n  source.emitChange = function () {\n    setTimeout(function () { // Async to avoid running within render of component\n      exports.emit('change');\n    }, 0);\n  };\n\n  source.emit = function () {\n    var args = arguments;\n    setTimeout(function () { // Async to avoid running within render of component\n      exports.emit.apply(exports, args);\n    }, 0);\n  };\n\n  exports.addChangeListener = function (callback) {\n    exports.on('change', callback);\n  };\n\n  exports.removeChangeListener = function (callback) {\n    exports.removeListener('change', callback);\n  };\n\n  // Register actions\n  source.actions.forEach(function (action) {\n    if (!action || !action.handlerName) {\n      throw new Error('This is not an action ' + action);\n    }\n    if (!source[action.handlerName]) {\n      throw new Error('There is no handler for action: ' + action);\n    }\n    action.on('trigger', source[action.handlerName].bind(source));\n  });\n\n  // Register exports\n  Object.keys(source.exports).forEach(function (key) {\n    exports[key] = function () {\n      return safeDeepClone('[Circular]', [], source.exports[key].apply(source, arguments));\n    };\n  });\n\n  return exports;\n\n};\n\nflux.debug = function () {\n  global.React = React;\n};\n\nflux.createActions = function () {\n  return action.apply(null, arguments);\n};\n\nflux.createStore = function (definition) {\n  return mergeStore(definition.mixins, definition);\n};\n\nflux.RenderMixin = RenderMixin;\n\n// If running in global mode, expose $$\nif (!global.exports && !global.module && (!global.define || !global.define.amd)) {\n  global.flux = flux;\n}\n\nmodule.exports = flux;\n"]},"metadata":{},"sourceType":"script"}