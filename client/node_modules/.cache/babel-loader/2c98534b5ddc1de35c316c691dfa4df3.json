{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\asus\\\\Documents\\\\javascript_studying\\\\opticMap\\\\optic-map\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Map,View}from\"ol\";import TileLayer from\"ol/layer/Tile\";import OSM from\"ol/source/OSM\";import{fromLonLat,transformExtent,transform}from\"ol/proj\";import\"./OpticMap.css\";import{Circle as CircleStyle,Fill,Stroke,Style}from\"ol/style\";import Feature from\"ol/Feature\";import Point from\"ol/geom/Point\";import{Control,defaults}from\"ol/control\";// import Group from \"ol/layer/Group\";\nimport VectorLayer from\"ol/layer/Vector\";import VectorSource from\"ol/source/Vector\";import switchesArray from\"./res/switches.json\";import opticsArray from\"./res/optics.json\";import LineString from\"ol/geom/LineString\";var OpticMap=/*#__PURE__*/function(_Component){_inherits(OpticMap,_Component);function OpticMap(props){var _this;_classCallCheck(this,OpticMap);_this=_possibleConstructorReturn(this,_getPrototypeOf(OpticMap).call(this,props));_this.state={map:null,coordinates:\"coordinates\",displayedFeatures:null,featureInfo:{address:null,ipAddress:null,info:null,locationInfo:null},switchesLayerVisible:true};_this.handleZoom=_this.handleZoom.bind(_assertThisInitialized(_this));_this.setSwitchesToDisplayedFeatures=_this.setSwitchesToDisplayedFeatures.bind(_assertThisInitialized(_this));_this.setOpticsToDisplayedFeatures=_this.setOpticsToDisplayedFeatures.bind(_assertThisInitialized(_this));// this.renderDisplayedFeatures = this.returnDisplayedFeatures.bind(this);\nreturn _this;}_createClass(OpticMap,[{key:\"setSwitchesToDisplayedFeatures\",value:function setSwitchesToDisplayedFeatures(){this.setState({displayedFeatures:switchesArray});}},{key:\"setOpticsToDisplayedFeatures\",value:function setOpticsToDisplayedFeatures(){this.setState({displayedFeatures:opticsArray});}},{key:\"handleRightPanelItemClick\",value:function handleRightPanelItemClick(item){console.log(item.coordinates);if(item.ipAddress===null){console.log(item.coordinates[0]);this.state.map.getView().animate({center:fromLonLat(item.coordinates[0])},{zoom:17.5});}else{this.state.map.getView().animate({center:fromLonLat(item.coordinates)},{zoom:19});}this.setState({featureInfo:{address:item.address,ipAddress:item.ipAddress,info:item.info,locationInfo:item.locationInfo}});}},{key:\"handleZoom\",value:function handleZoom(zoomSize){if(zoomSize<12.8){this.switchesLayer.setStyle(new Style({image:new CircleStyle({radius:1,stroke:new Stroke({color:\"black\",width:1}),fill:new Fill({color:\"tomato\"})})}));this.opticsLayer.setStyle(new Style({stroke:new Stroke({width:0.5,color:\"blue\"})}));}else if(zoomSize<14){this.switchesLayer.setStyle(new Style({image:new CircleStyle({radius:2.5,stroke:new Stroke({color:\"black\",width:1}),fill:new Fill({color:\"tomato\"})})}));this.opticsLayer.setStyle(new Style({stroke:new Stroke({width:2,color:\"blue\"})}));}else{this.switchesLayer.setStyle(new Style({image:new CircleStyle({radius:5,stroke:new Stroke({color:\"black\",width:1}),fill:new Fill({color:\"tomato\"})})}));this.opticsLayer.setStyle(new Style({stroke:new Stroke({width:4,color:\"blue\"})}));}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// map settings\nvar extentView=transformExtent([20.969893/** min x */,57.540673/** min y */,28.413477/** max x */,59.894102/** max y */],\"EPSG:4326\",\"EPSG:3857\");var extentLayer=transformExtent([16.581885/** min x */,55.671002/** min y */,32.794556/** max x */,61.543774/** max y */],\"EPSG:4326\",\"EPSG:3857\");//custom map controls\nvar switchesVisible=function(Control){function switchesVisible(){var button=document.createElement(\"button\");button.innerHTML=\"switches\";var element=document.createElement(\"div\");element.className=\"switches-visible ol-unselectable ol-control\";element.appendChild(button);Control.call(this,{element:element});button.addEventListener(\"click\",this.handleSwitchesVisible.bind(this),false);}if(Control)switchesVisible.__proto__=Control;switchesVisible.prototype=Object.create(Control&&Control.prototype);switchesVisible.prototype.constructor=switchesVisible;switchesVisible.prototype.handleSwitchesVisible=function handleSwitchesVisible(){map.getLayers().getArray().map(function(layer){if(layer.getClassName()===\"switchesLayer\"){layer.setVisible(!layer.getVisible());}});console.log(map.getLayers());};return switchesVisible;}(Control);var opticsVisible=function(Control){function opticsVisible(){var button=document.createElement(\"button\");button.innerHTML=\"optics\";var element=document.createElement(\"div\");element.className=\"optics-visible ol-unselectable ol-control\";element.appendChild(button);Control.call(this,{element:element});button.addEventListener(\"click\",this.handleOpticsVisible.bind(this),false);}if(Control)opticsVisible.__proto__=Control;opticsVisible.prototype=Object.create(Control&&Control.prototype);opticsVisible.prototype.constructor=opticsVisible;opticsVisible.prototype.handleOpticsVisible=function handleOpticsVisible(){map.getLayers().getArray().map(function(layer){if(layer.getClassName()===\"opticsLayer\"){layer.setVisible(!layer.getVisible());}});console.log(map.getLayers());};return opticsVisible;}(Control);//custom map controls\nvar map=new Map({target:this.refs.mapContainer,layers:[new TileLayer({source:new OSM(),extent:extentLayer,zIndex:0})],view:new View({center:fromLonLat([28.185281,59.374348]),zoom:14,extent:extentView,minZoom:7.5}),controls:defaults({attributionOptions:{target:this.refs.mapContainer}}).extend([new switchesVisible(),new opticsVisible()])});// map settings\n//map feature settings\nvar switchFeatureList=[];switchesArray.map(function(data){var featureElement=new Feature({geometry:new Point(fromLonLat(data.coordinates)),address:data.address,ipAddress:data.ipAddress,info:data.info,locationInfo:data.locationInfo});switchFeatureList.push(featureElement);console.log(featureElement.getKeys());});var opticsFeatureList=[];opticsArray.map(function(data){var coordinatesArray=[];data.coordinates.map(function(coordinate){coordinatesArray.push(fromLonLat(coordinate));});var featureElement=new Feature({geometry:new LineString(coordinatesArray),address:data.address,ipAddress:data.ipAddress,info:data.info,locationInfo:data.locationInfo});opticsFeatureList.push(featureElement);console.log(featureElement.getKeys());});var opticsLayerSource=new VectorSource({features:opticsFeatureList});this.opticsLayer=new VectorLayer({className:\"opticsLayer\",source:opticsLayerSource,visible:true,zIndex:0,style:new Style({stroke:new Stroke({width:2,color:\"blue\"})})});var switchesLayerSource=new VectorSource({features:switchFeatureList});this.switchesLayer=new VectorLayer({className:\"switchesLayer\",source:switchesLayerSource,visible:true,zIndex:1,style:new Style({image:new CircleStyle({radius:3.8,stroke:new Stroke({color:\"black\",width:1}),fill:new Fill({color:\"tomato\"})})})});//map feature settings\n//layers settings\nmap.addLayer(this.switchesLayer);map.addLayer(this.opticsLayer);//layers settings\n// get coordinates by click on map\nmap.on(\"click\",function(pointOfClick){var clickedCoordinate=transform(pointOfClick.coordinate,\"EPSG:3857\",\"EPSG:4326\");var coordinateString=clickedCoordinate[0].toFixed(6)+\",\"+clickedCoordinate[1].toFixed(6);this.setState({coordinates:coordinateString});// let featureAddress = \"\";\n// let featureIpAddress = \"\";\n// let featureInfo = \"\";\nmap.forEachFeatureAtPixel(pointOfClick.pixel,function(feature,layer){this.setState({featureInfo:{address:feature.getProperties().address,ipAddress:feature.getProperties().ipAddress,info:feature.getProperties().info,locationInfo:feature.getProperties().locationInfo}});}.bind(this));}.bind(this));// change features size on zoom change\nmap.getView().on(\"propertychange\",function(e){switch(e.key){case\"resolution\":_this2.handleZoom(map.getView().getZoom());console.log(map.getView().getZoom());break;}});this.setState({map:map});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"opticMapComponent\"},React.createElement(\"div\",{className:\"leftMapPanel\"},React.createElement(\"div\",{className:\"coordinateString\",id:\"coordinateString\"},React.createElement(\"p\",null,this.state.coordinates)),React.createElement(\"div\",{className:\"objectButtons\"},React.createElement(\"div\",{className:\"objectButton\"},React.createElement(\"div\",{className:\"switchesButton\",onClick:this.setSwitchesToDisplayedFeatures},\"switches\")),React.createElement(\"div\",{className:\"objectButton\"},React.createElement(\"div\",{className:\"opticCableButton\",onClick:this.setOpticsToDisplayedFeatures},\"optic Cable\"))),React.createElement(\"div\",{className:\"featureInfo\"},this.state.featureInfo.address!==null?React.createElement(\"div\",{className:\"featureInfoElement\"},this.state.featureInfo.address):React.createElement(\"div\",{className:\"hidden\"}),this.state.featureInfo.ipAddress!==null?React.createElement(\"div\",{className:\"featureInfoElement\"},this.state.featureInfo.ipAddress):React.createElement(\"div\",{className:\"hidden\"}),this.state.featureInfo.info!==null?React.createElement(\"div\",{className:\"featureInfoElement\"},this.state.featureInfo.info):React.createElement(\"div\",{className:\"hidden\"}),this.state.featureInfo.locationInfo!==null?React.createElement(\"div\",{className:\"featureInfoElement\"},this.state.featureInfo.locationInfo):React.createElement(\"div\",{className:\"hidden\"}))),React.createElement(\"div\",{className:\"mapContainer\",id:\"mapContainer\",ref:\"mapContainer\"}),React.createElement(\"div\",{className:\"rightMapPanel\"},React.createElement(\"div\",{className:\"displayedFeatures\"},this.state.displayedFeatures!==null?this.state.displayedFeatures.map(function(feature){return React.createElement(\"li\",{className:\"displayedFeature\",key:feature.coordinates,onClick:_this3.handleRightPanelItemClick.bind(_this3,feature)},feature.address);}):React.createElement(\"div\",null))));}}]);return OpticMap;}(Component);export default OpticMap;","map":{"version":3,"sources":["C:/Users/asus/Documents/javascript_studying/opticMap/optic-map/src/OpticMap.js"],"names":["React","Component","Map","View","TileLayer","OSM","fromLonLat","transformExtent","transform","Circle","CircleStyle","Fill","Stroke","Style","Feature","Point","Control","defaults","VectorLayer","VectorSource","switchesArray","opticsArray","LineString","OpticMap","props","state","map","coordinates","displayedFeatures","featureInfo","address","ipAddress","info","locationInfo","switchesLayerVisible","handleZoom","bind","setSwitchesToDisplayedFeatures","setOpticsToDisplayedFeatures","setState","item","console","log","getView","animate","center","zoom","zoomSize","switchesLayer","setStyle","image","radius","stroke","color","width","fill","opticsLayer","extentView","extentLayer","switchesVisible","button","document","createElement","innerHTML","element","className","appendChild","call","addEventListener","handleSwitchesVisible","__proto__","prototype","Object","create","constructor","getLayers","getArray","layer","getClassName","setVisible","getVisible","opticsVisible","handleOpticsVisible","target","refs","mapContainer","layers","source","extent","zIndex","view","minZoom","controls","attributionOptions","extend","switchFeatureList","data","featureElement","geometry","push","getKeys","opticsFeatureList","coordinatesArray","coordinate","opticsLayerSource","features","visible","style","switchesLayerSource","addLayer","on","pointOfClick","clickedCoordinate","coordinateString","toFixed","forEachFeatureAtPixel","pixel","feature","getProperties","e","key","getZoom","handleRightPanelItemClick"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport { Map, View } from \"ol\";\nimport TileLayer from \"ol/layer/Tile\";\nimport OSM from \"ol/source/OSM\";\nimport { fromLonLat, transformExtent, transform } from \"ol/proj\";\nimport \"./OpticMap.css\";\nimport { Circle as CircleStyle, Fill, Stroke, Style } from \"ol/style\";\nimport Feature from \"ol/Feature\";\nimport Point from \"ol/geom/Point\";\nimport { Control, defaults } from \"ol/control\";\n// import Group from \"ol/layer/Group\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\nimport switchesArray from \"./res/switches.json\";\nimport opticsArray from \"./res/optics.json\";\nimport LineString from \"ol/geom/LineString\";\n\nclass OpticMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      map: null,\n      coordinates: \"coordinates\",\n      displayedFeatures: null,\n      featureInfo: {\n        address: null,\n        ipAddress: null,\n        info: null,\n        locationInfo: null,\n      },\n      switchesLayerVisible: true,\n    };\n\n    this.handleZoom = this.handleZoom.bind(this);\n    this.setSwitchesToDisplayedFeatures = this.setSwitchesToDisplayedFeatures.bind(\n      this\n    );\n    this.setOpticsToDisplayedFeatures = this.setOpticsToDisplayedFeatures.bind(\n      this\n    );\n    // this.renderDisplayedFeatures = this.returnDisplayedFeatures.bind(this);\n  }\n\n  setSwitchesToDisplayedFeatures() {\n    this.setState({\n      displayedFeatures: switchesArray,\n    });\n  }\n  setOpticsToDisplayedFeatures() {\n    this.setState({\n      displayedFeatures: opticsArray,\n    });\n  }\n\n  handleRightPanelItemClick(item) {\n    console.log(item.coordinates);\n\n    if (item.ipAddress === null) {\n      console.log(item.coordinates[0]);\n      this.state.map.getView().animate(\n        {\n          center: fromLonLat(item.coordinates[0]),\n        },\n        { zoom: 17.5 }\n      );\n    } else {\n      this.state.map\n        .getView()\n        .animate({ center: fromLonLat(item.coordinates) }, { zoom: 19 });\n    }\n    this.setState({\n      featureInfo: {\n        address: item.address,\n        ipAddress: item.ipAddress,\n        info: item.info,\n        locationInfo: item.locationInfo,\n      },\n    });\n  }\n\n  handleZoom(zoomSize) {\n    if (zoomSize < 12.8) {\n      this.switchesLayer.setStyle(\n        new Style({\n          image: new CircleStyle({\n            radius: 1,\n            stroke: new Stroke({ color: \"black\", width: 1 }),\n            fill: new Fill({ color: \"tomato\" }),\n          }),\n        })\n      );\n      this.opticsLayer.setStyle(\n        new Style({\n          stroke: new Stroke({\n            width: 0.5,\n            color: \"blue\",\n          }),\n        })\n      );\n    } else if (zoomSize < 14) {\n      this.switchesLayer.setStyle(\n        new Style({\n          image: new CircleStyle({\n            radius: 2.5,\n            stroke: new Stroke({ color: \"black\", width: 1 }),\n            fill: new Fill({ color: \"tomato\" }),\n          }),\n        })\n      );\n      this.opticsLayer.setStyle(\n        new Style({\n          stroke: new Stroke({\n            width: 2,\n            color: \"blue\",\n          }),\n        })\n      );\n    } else {\n      this.switchesLayer.setStyle(\n        new Style({\n          image: new CircleStyle({\n            radius: 5,\n            stroke: new Stroke({ color: \"black\", width: 1 }),\n            fill: new Fill({ color: \"tomato\" }),\n          }),\n        })\n      );\n      this.opticsLayer.setStyle(\n        new Style({\n          stroke: new Stroke({\n            width: 4,\n            color: \"blue\",\n          }),\n        })\n      );\n    }\n  }\n  componentDidMount() {\n    // map settings\n    const extentView = transformExtent(\n      [\n        20.969893 /** min x */,\n        57.540673 /** min y */,\n        28.413477 /** max x */,\n        59.894102 /** max y */,\n      ],\n      \"EPSG:4326\",\n      \"EPSG:3857\"\n    );\n    const extentLayer = transformExtent(\n      [\n        16.581885 /** min x */,\n        55.671002 /** min y */,\n        32.794556 /** max x */,\n        61.543774 /** max y */,\n      ],\n      \"EPSG:4326\",\n      \"EPSG:3857\"\n    );\n\n    //custom map controls\n\n    const switchesVisible = (function (Control) {\n      function switchesVisible() {\n        const button = document.createElement(\"button\");\n        button.innerHTML = \"switches\";\n\n        var element = document.createElement(\"div\");\n        element.className = \"switches-visible ol-unselectable ol-control\";\n        element.appendChild(button);\n\n        Control.call(this, {\n          element: element,\n        });\n\n        button.addEventListener(\n          \"click\",\n          this.handleSwitchesVisible.bind(this),\n          false\n        );\n      }\n\n      if (Control) switchesVisible.__proto__ = Control;\n      switchesVisible.prototype = Object.create(Control && Control.prototype);\n      switchesVisible.prototype.constructor = switchesVisible;\n\n      switchesVisible.prototype.handleSwitchesVisible = function handleSwitchesVisible() {\n        map\n          .getLayers()\n          .getArray()\n          .map((layer) => {\n            if (layer.getClassName() === \"switchesLayer\") {\n              layer.setVisible(!layer.getVisible());\n            }\n          });\n        console.log(map.getLayers());\n      };\n\n      return switchesVisible;\n    })(Control);\n\n    const opticsVisible = (function (Control) {\n      function opticsVisible() {\n        const button = document.createElement(\"button\");\n        button.innerHTML = \"optics\";\n\n        var element = document.createElement(\"div\");\n        element.className = \"optics-visible ol-unselectable ol-control\";\n        element.appendChild(button);\n\n        Control.call(this, {\n          element: element,\n        });\n\n        button.addEventListener(\n          \"click\",\n          this.handleOpticsVisible.bind(this),\n          false\n        );\n      }\n\n      if (Control) opticsVisible.__proto__ = Control;\n      opticsVisible.prototype = Object.create(Control && Control.prototype);\n      opticsVisible.prototype.constructor = opticsVisible;\n\n      opticsVisible.prototype.handleOpticsVisible = function handleOpticsVisible() {\n        map\n          .getLayers()\n          .getArray()\n          .map((layer) => {\n            if (layer.getClassName() === \"opticsLayer\") {\n              layer.setVisible(!layer.getVisible());\n            }\n          });\n        console.log(map.getLayers());\n      };\n\n      return opticsVisible;\n    })(Control);\n\n    //custom map controls\n\n    let map = new Map({\n      target: this.refs.mapContainer,\n      layers: [\n        new TileLayer({\n          source: new OSM(),\n          extent: extentLayer,\n          zIndex: 0,\n        }),\n      ],\n      view: new View({\n        center: fromLonLat([28.185281, 59.374348]),\n        zoom: 14,\n        extent: extentView,\n        minZoom: 7.5,\n      }),\n      controls: defaults({\n        attributionOptions: {\n          target: this.refs.mapContainer,\n        },\n      }).extend([new switchesVisible(), new opticsVisible()]),\n    });\n\n    // map settings\n\n    //map feature settings\n\n    var switchFeatureList = [];\n\n    switchesArray.map((data) => {\n      let featureElement = new Feature({\n        geometry: new Point(fromLonLat(data.coordinates)),\n        address: data.address,\n        ipAddress: data.ipAddress,\n        info: data.info,\n        locationInfo: data.locationInfo,\n      });\n      switchFeatureList.push(featureElement);\n\n      console.log(featureElement.getKeys());\n    });\n\n    var opticsFeatureList = [];\n\n    opticsArray.map((data) => {\n      let coordinatesArray = [];\n      data.coordinates.map((coordinate) => {\n        coordinatesArray.push(fromLonLat(coordinate));\n      });\n      let featureElement = new Feature({\n        geometry: new LineString(coordinatesArray),\n        address: data.address,\n        ipAddress: data.ipAddress,\n        info: data.info,\n        locationInfo: data.locationInfo,\n      });\n\n      opticsFeatureList.push(featureElement);\n\n      console.log(featureElement.getKeys());\n    });\n\n    let opticsLayerSource = new VectorSource({\n      features: opticsFeatureList,\n    });\n\n    this.opticsLayer = new VectorLayer({\n      className: \"opticsLayer\",\n      source: opticsLayerSource,\n      visible: true,\n      zIndex: 0,\n      style: new Style({\n        stroke: new Stroke({\n          width: 2,\n          color: \"blue\",\n        }),\n      }),\n    });\n\n    let switchesLayerSource = new VectorSource({\n      features: switchFeatureList,\n    });\n\n    this.switchesLayer = new VectorLayer({\n      className: \"switchesLayer\",\n      source: switchesLayerSource,\n      visible: true,\n      zIndex: 1,\n      style: new Style({\n        image: new CircleStyle({\n          radius: 3.8,\n          stroke: new Stroke({ color: \"black\", width: 1 }),\n          fill: new Fill({ color: \"tomato\" }),\n        }),\n      }),\n    });\n\n    //map feature settings\n\n    //layers settings\n    map.addLayer(this.switchesLayer);\n    map.addLayer(this.opticsLayer);\n    //layers settings\n    // get coordinates by click on map\n    map.on(\n      \"click\",\n      function (pointOfClick) {\n        const clickedCoordinate = transform(\n          pointOfClick.coordinate,\n          \"EPSG:3857\",\n          \"EPSG:4326\"\n        );\n\n        let coordinateString =\n          clickedCoordinate[0].toFixed(6) +\n          \",\" +\n          clickedCoordinate[1].toFixed(6);\n        this.setState({ coordinates: coordinateString });\n\n        // let featureAddress = \"\";\n        // let featureIpAddress = \"\";\n        // let featureInfo = \"\";\n\n        map.forEachFeatureAtPixel(\n          pointOfClick.pixel,\n          function (feature, layer) {\n            this.setState({\n              featureInfo: {\n                address: feature.getProperties().address,\n                ipAddress: feature.getProperties().ipAddress,\n                info: feature.getProperties().info,\n                locationInfo: feature.getProperties().locationInfo,\n              },\n            });\n          }.bind(this)\n        );\n      }.bind(this)\n    );\n    // change features size on zoom change\n    map.getView().on(\"propertychange\", (e) => {\n      switch (e.key) {\n        case \"resolution\":\n          this.handleZoom(map.getView().getZoom());\n          console.log(map.getView().getZoom());\n\n          break;\n      }\n    });\n\n    this.setState({\n      map: map,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"opticMapComponent\">\n        <div className=\"leftMapPanel\">\n          <div className=\"coordinateString\" id=\"coordinateString\">\n            <p>{this.state.coordinates}</p>\n          </div>\n\n          <div className=\"objectButtons\">\n            <div className=\"objectButton\">\n              <div\n                className=\"switchesButton\"\n                onClick={this.setSwitchesToDisplayedFeatures}\n              >\n                switches\n              </div>\n            </div>\n\n            <div className=\"objectButton\">\n              <div\n                className=\"opticCableButton\"\n                onClick={this.setOpticsToDisplayedFeatures}\n              >\n                optic Cable\n              </div>\n            </div>\n          </div>\n\n          <div className=\"featureInfo\">\n            {this.state.featureInfo.address !== null ? (\n              <div className=\"featureInfoElement\">\n                {this.state.featureInfo.address}\n              </div>\n            ) : (\n              <div className=\"hidden\"></div>\n            )}\n\n            {this.state.featureInfo.ipAddress !== null ? (\n              <div className=\"featureInfoElement\">\n                {this.state.featureInfo.ipAddress}\n              </div>\n            ) : (\n              <div className=\"hidden\"></div>\n            )}\n\n            {this.state.featureInfo.info !== null ? (\n              <div className=\"featureInfoElement\">\n                {this.state.featureInfo.info}\n              </div>\n            ) : (\n              <div className=\"hidden\"></div>\n            )}\n\n            {this.state.featureInfo.locationInfo !== null ? (\n              <div className=\"featureInfoElement\">\n                {this.state.featureInfo.locationInfo}\n              </div>\n            ) : (\n              <div className=\"hidden\"></div>\n            )}\n          </div>\n        </div>\n        <div\n          className=\"mapContainer\"\n          id=\"mapContainer\"\n          ref=\"mapContainer\"\n        ></div>\n        <div className=\"rightMapPanel\">\n          <div className=\"displayedFeatures\">\n            {this.state.displayedFeatures !== null ? (\n              this.state.displayedFeatures.map((feature) => {\n                return (\n                  <li\n                    className=\"displayedFeature\"\n                    key={feature.coordinates}\n                    onClick={this.handleRightPanelItemClick.bind(this, feature)}\n                  >\n                    {feature.address}\n                  </li>\n                );\n              })\n            ) : (\n              <div></div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OpticMap;\n"]},"metadata":{},"sourceType":"module"}